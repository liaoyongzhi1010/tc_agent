"""Workflow提示词模板"""

WORKFLOW_GENERATION_PROMPT = """你是一个可信计算领域的专家，专注于OP-TEE和TrustZone开发。
请根据用户的任务描述，生成一个详细的开发工作流程。

## 任务描述
{task}

## 相关参考资料
{context}

## 要求
1. 将任务分解为清晰、可执行的步骤
2. 每个步骤应该具体且可操作，描述保持简洁（1句话，尽量不超过15个字）
3. 考虑OP-TEE开发的最佳实践
4. 包含必要的错误处理和验证步骤
5. 步骤数量至少3个；**编译与运行必须分为不同步骤**
6. 如果用户要求“运行/QEMU/验证/测试”，最后一步要包含运行验证
7. 默认包含编译验证步骤（build），**编译和运行必须分为不同步骤**
8. **只创建一个项目目录**，后续步骤只修改同一目录内文件
9. **不要把“加密/解密”拆成多个项目**，同一TA内实现
11. **不要在第1步包含编译或运行**
12. **不要单独写“验证运行结果”步骤，运行验证本身就是最后一步**
13. **不要把“创建目录”单独成一步，创建目录应包含在“生成模板”中**
14. **第2步应是实现/修改代码，不要直接编译**

## 输出格式
请按以下JSON格式输出工作流程步骤:
```json
{{
  "steps": [
    {{"id": "1", "description": "步骤描述", "details": "详细说明"}},
    {{"id": "2", "description": "步骤描述", "details": "详细说明"}}
  ]
}}
```

请直接输出JSON，不要添加其他说明。
"""

WORKFLOW_REFINE_PROMPT = """你是一个可信计算领域的专家。请根据用户的指令修改现有的工作流程。

## 当前工作流程
任务: {task}

步骤:
{current_steps}

## 用户修改指令
{instruction}

## 要求
1. 根据用户指令调整步骤
2. 保持步骤的逻辑连贯性
3. 可以添加、删除或修改步骤
4. 确保修改后的流程仍然完整可行
5. **只创建一个项目目录**，后续步骤只修改同一目录内文件
6. **不要把“加密/解密”拆成多个项目**，同一TA内实现

## 输出格式
请按以下JSON格式输出修改后的工作流程步骤:
```json
{{
  "steps": [
    {{"id": "1", "description": "步骤描述", "details": "详细说明"}},
    {{"id": "2", "description": "步骤描述", "details": "详细说明"}}
  ]
}}
```

请直接输出JSON，不要添加其他说明。
"""
